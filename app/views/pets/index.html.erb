<div class="small-jumbotron text-center ">

</div>

<div class="container">
<!-- Search bar disabled for now, need to implement post-MVP -->
  <input class="form-control" id="anythingSearch" type="text" placeholder="Type something to search list items" disabled>
  <div id="myDIV" class="my-3">
    <button class="btn btn-outline-primary btn-main-page" disabled>Rechercher</button>
    <button class="btn btn-info" disabled>Another button</button>
    <hr />
    <p></p>
  </div>
</div>

<div class="container">
  <table>
  <h3 class="m-5">Plus de choix</h3>
    <tbody>
      <% @pets_list.each do |pet| %>
        <tr class="border-bottom border-success">
          <td class="col-md-3 p-2">
            <div id="likeBody<%= pet.id %>" class="card-body">
              <div id="demo" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner" >
                  <% unless pet.photos.empty? %>
                    <div class="carousel-item active">
                      <%= image_tag pet.photos.first, class: "card-img-top" %>
                    </div>
                    <% pet.photos[1..-1].each do |p| %>
                      <div class="carousel-item">
                        <%= image_tag p, class: "card-img-top" %>
                      </div>
                    <%end%>
                  <% else %>
                    <div class="carousel-item active">
                      <%= image_tag("paw.svg", {class: "card-img-top"} ) %>
                    </div>
                    <div class="carousel-item">
                      <%= image_tag("paw.svg", {class: "card-img-top"} ) %>
                    </div>
                  <% end %>
                </div>
              </div>
            </div>
          </td>
          <td class="mb-3 col-md-2 p-2"><h3 class="card-title ml-3"><%= pet.name%></h3></td>
          <td class="mb-3 col-md-2 p-2 lead"><%= pet.sex %>, <%= pet.age %>
            <%if pet.age.to_s == "1" || pet.age.to_s == "0" %>
              <span> an </span>
            <%else%>
              <span> ans </span>
            <%end%>
          </td>
          <td class="mb-3 col-md-2 p-2 lead">Type <%= pet.breed %></td>
          <td class="mb-3 col-md-2 p-2 lead">
            <div class="mt-3">
              <% if pet.likes_as_liked.all.where(liker_id: @current_pet.id).exists? %>
                <% like = Like.where(liked_id: pet.id, liker_id: @current_pet.id).first %>
                <%= link_to pet_like_path(pet.id,like.id), method: :put, remote: true do %>
                  <i id="likeButton<%= pet.id %>" class="btn btn-primary btn-sm fa fa-heart float-right"></i>
                <% end %>
              <% else %>
                <%= link_to pet_likes_path(pet), method: :post, remote: true do %>
                  <i id="likeButton<%= pet.id %>" class="btn btn-outline-primary btn-sm fa fa-heart float-right"></i>
                <% end %>
              <% end %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
